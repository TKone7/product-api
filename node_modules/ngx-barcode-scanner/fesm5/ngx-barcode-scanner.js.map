{"version":3,"file":"ngx-barcode-scanner.js.map","sources":["ng://ngx-barcode-scanner/lib/barcode-scanner-livestream/barcode-types.ts","ng://ngx-barcode-scanner/lib/barcode-scanner-livestream/barcode-scanner-livestream.config.ts","ng://ngx-barcode-scanner/lib/barcode-scanner-livestream/barcode-scanner-livestream.component.ts","ng://ngx-barcode-scanner/lib/barcode-scanner-livestream/barcode-scanner-livestream.module.ts","ng://ngx-barcode-scanner/lib/barcode-scanner-livestream-overlay/barcode-scanner-livestream-overlay.component.ts","ng://ngx-barcode-scanner/lib/barcode-scanner-livestream-overlay/barcode-scanner-livestream-overlay.module.ts"],"sourcesContent":["export const BARCODE_TYPES = [\n    'code_128',\n    'code_39',\n    'code_39_vin',\n    'ean',\n    'ean_extended',\n    'ean_8',\n    'upc',\n    'upc_e',\n    'codabar',\n    'i2of5',\n    '2of5',\n    'code_93'\n];\n\nexport function mapToReader(value: string | string[]) {\n    if (typeof value === 'string') {\n        checkBarCodeType(value);\n        return [ mapToBarcodeType(value)];\n    } else {\n        return value.map(val => {\n            checkBarCodeType(val);\n            return mapToBarcodeType(val);\n        });\n    }\n}\n\nfunction checkBarCodeType(value: string) {\n    if (!BARCODE_TYPES.some(t => t === value)) {\n        throw new Error(`This barcode type '${value}' is not valid.`);\n    }\n}\n\nfunction mapToBarcodeType(value) {\n    return `${value}_reader`;\n}\n","export const DEFAULT_CONFIG = {\n    inputStream: {\n        name: 'Live',\n        type: 'LiveStream',\n        target: null,\n        constraints: {\n            width: { min: 640 },\n            height: { min: 480 },\n            aspectRatio: { min: 1, max: 100 },\n            facingMode: 'environment', // or user\n        },\n        singleChannel: false // true: only the red color-channel is read\n    },\n    locator: {\n        patchSize: 'medium',\n        halfSample: true\n    },\n    locate: true,\n    numOfWorkers: 4,\n    decoder: {\n        readers: ['code_128_reader']\n    }\n} as QuaggaConfig;\n\nexport interface QuaggaConfig {\n    inputStream: {\n        name: string,\n        type: string,\n        target: any,\n        constraints: {\n            width: { min: number },\n            height: { min: number },\n            aspectRatio: { min: number, max: number },\n            facingMode: string, // or user\n            deviceId: string\n        },\n        singleChannel: boolean // true: only the red color-channel is read\n    };\n    locator: {\n        patchSize: string,\n        halfSample: boolean\n    };\n    locate: boolean;\n    numOfWorkers: number;\n    decoder: {\n        readers: string[]\n    };\n}\n","import {\n    Component, Input, Output, ViewChild, OnDestroy, ViewEncapsulation, OnChanges, SimpleChanges, EventEmitter\n} from '@angular/core';\nimport * as Quagga from 'quagga';\nimport { mapToReader } from './barcode-types';\nimport { DEFAULT_CONFIG, QuaggaConfig } from './barcode-scanner-livestream.config';\n\n@Component({\n    selector: 'barcode-scanner-livestream',\n    templateUrl: './barcode-scanner-livestream.component.html',\n    styleUrls: ['./barcode-scanner-livestream.component.scss'],\n    encapsulation: ViewEncapsulation.None,\n})\nexport class BarecodeScannerLivestreamComponent implements OnChanges, OnDestroy {\n    // Inputs\n    @Input() type: string | string[];\n\n    @Input() deviceId: string;\n\n    // Outputs\n    @Output() valueChanges = new EventEmitter();\n\n    @Output() started = new EventEmitter();\n\n    @ViewChild('BarecodeScanner') barecodeScanner;\n\n    private _started = false;\n\n    get isStarted() {\n        return this._started;\n    }\n\n    private configQuagga: QuaggaConfig = DEFAULT_CONFIG;\n\n    ngOnDestroy(): void {\n        this.stop();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.restart();\n    }\n\n    private _init() {\n        return new Promise((resolve, reject) => {\n            Quagga.onProcessed((result) => this.onProcessed(result));\n\n            Quagga.onDetected((result) => this.onDetected(result));\n\n            this.configQuagga.inputStream.target = this.barecodeScanner.nativeElement;\n\n            if (this.type) {\n                this.configQuagga.decoder.readers = mapToReader(this.type);\n            }\n\n            if (this.deviceId) {\n                this.configQuagga.inputStream.constraints.deviceId = this.deviceId;\n            }\n\n            Quagga.init(this.configQuagga, (err) => {\n                if (err) {\n                    console.log(err);\n                    return reject(err);\n                }\n\n                resolve();\n            });\n        });\n    }\n\n    async start() {\n        if (!this._started) {\n            await this._init();\n            Quagga.start();\n            this._started = true;\n            this.started.next(true);\n        }\n    }\n\n    stop() {\n        if (this._started) {\n            Quagga.stop();\n            this._started = false;\n            this.started.next(false);\n        }\n    }\n\n    restart() {\n        if (this._started) {\n            this.stop();\n            this.start();\n        }\n    }\n\n    onProcessed(result: any): any {\n        const drawingCtx = Quagga.canvas.ctx.overlay,\n              drawingCanvas = Quagga.canvas.dom.overlay;\n\n        if (result) {\n            if (result.boxes) {\n                drawingCtx.clearRect(0, 0,\n                    parseInt(drawingCanvas.getAttribute('width'), 10),\n                    parseInt(drawingCanvas.getAttribute('height'), 10));\n                result.boxes.filter(function (box) {\n                    return box !== result.box;\n                }).forEach(function (box) {\n                    Quagga.ImageDebug.drawPath(box, {\n                        x: 0,\n                        y: 1,\n                    }, drawingCtx, {\n                            color: 'green',\n                            lineWidth: 2,\n                        });\n                });\n            }\n\n            if (result.box) {\n                Quagga.ImageDebug.drawPath(result.box, {\n                    x: 0,\n                    y: 1,\n                }, drawingCtx, {\n                        color: '#00F',\n                        lineWidth: 2,\n                    });\n            }\n\n            if (result.codeResult && result.codeResult.code) {\n                Quagga.ImageDebug.drawPath(result.line, {\n                    x: 'x',\n                    y: 'y',\n                }, drawingCtx, {\n                        color: 'red',\n                        lineWidth: 3,\n                    });\n            }\n\n        }\n    }\n\n    onDetected(result) {\n        this.valueChanges.next(result);\n    }\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BarecodeScannerLivestreamComponent } from './barcode-scanner-livestream.component';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        BarecodeScannerLivestreamComponent\n    ],\n    exports: [\n        BarecodeScannerLivestreamComponent\n    ]\n})\nexport class BarecodeScannerLivestreamModule { }\n","import {\n    Component, Input, Output, ViewChild, OnDestroy, EventEmitter\n} from '@angular/core';\nimport { BarecodeScannerLivestreamComponent } from '../barcode-scanner-livestream/barcode-scanner-livestream.component';\n\n@Component({\n    selector: 'barcode-scanner-livestream-overlay',\n    templateUrl: './barcode-scanner-livestream-overlay.component.html',\n    styleUrls: ['./barcode-scanner-livestream-overlay.component.scss'],\n})\nexport class BarecodeScannerLivestreamOverlayComponent implements OnDestroy {\n\n    private _started = false;\n\n    get isStarted() {\n        return this._started;\n    }\n\n    // Inputs\n    @Input() type: string | string[];\n\n    @Input() deviceId: string;\n\n    @Output() valueChanges = new EventEmitter<string>();\n\n    @Output() started = new EventEmitter<boolean>();\n\n    @ViewChild(BarecodeScannerLivestreamComponent)\n    scanner: BarecodeScannerLivestreamComponent;\n\n    private _showScanner = false;\n\n    get showScanner() {\n        return this._showScanner;\n    }\n\n    ngOnDestroy() {\n        this.scanner.stop();\n    }\n\n    show() {\n        this._showScanner = true;\n        this.scanner.start();\n    }\n\n    hide() {\n        this._showScanner = false;\n        this.scanner.stop();\n    }\n\n    onStarted(value: boolean) {\n        this._started = value;\n        this.started.next(value);\n    }\n\n    onValueChanges(result: string) {\n        this.valueChanges.next(result);\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BarecodeScannerLivestreamOverlayComponent } from './barcode-scanner-livestream-overlay.component';\nimport { BarecodeScannerLivestreamModule } from '../barcode-scanner-livestream/barcode-scanner-livestream.module';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        BarecodeScannerLivestreamModule\n    ],\n    declarations: [\n        BarecodeScannerLivestreamOverlayComponent\n    ],\n    exports: [\n        BarecodeScannerLivestreamOverlayComponent\n    ]\n})\nexport class BarecodeScannerLivestreamOverlayModule { }\n\n"],"names":["Quagga.onProcessed","Quagga.onDetected","Quagga.init","Quagga.start","Quagga.stop","Quagga.canvas","Quagga.ImageDebug"],"mappings":"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"}
